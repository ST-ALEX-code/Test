<form id="lead-form">
    <input type="text" name="name" placeholder="Ваше ім’я" required>
    <input type="tel" name="phone" placeholder="Ваш телефон" required>

    <!-- Honeypot -->
    <input type="text" name="hidden_field" style="display:none">

    <!-- Anti-spam timer -->
    <input type="hidden" name="ts" id="ts">

    <!-- UTM, якщо потрібно -->
    <input type="hidden" name="utm_source">
    <input type="hidden" name="utm_medium">
    <input type="hidden" name="utm_campaign">
    <input type="hidden" name="utm_term">
    <input type="hidden" name="utm_content">
    <input type="hidden" name="gclid">
    <input type="hidden" name="fbclid">

    <button type="submit">Надіслати</button>
</form>

<script>
// ставимо час ініціалізації форми
document.getElementById("ts").value = Date.now();

// підставляємо UTM з URL
const params = new URLSearchParams(location.search);
params.forEach((v, k) => {
    const field = document.querySelector(`[name=${k}]`);
    if (field) field.value = v;
});

// submit handler
document.getElementById("lead-form").addEventListener("submit", async e => {
    e.preventDefault();

    const fd = new FormData(e.target);

    const r = await fetch("https://sendformtg.alex-007-writer.workers.dev", {
        method: "POST",
        body: fd
    });

    if (r.ok) {
        window.location.href = "/thankyou.html";
    } else {
        alert(await r.text());
    }
});
</script>
